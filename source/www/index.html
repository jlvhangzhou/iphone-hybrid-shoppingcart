<!DOCTYPE html>
<html>
    <head>
        
        
        <script type="text/javascript" charset="utf-8" src="jquery-1.7.1.js"></script>
        
        <title>Hybrid App</title>
        
        <meta charset="utf-8">
            
            
            <!-- iPad/iPhone specific css below, add after your main css >
             <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
             <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />		
             -->
            <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
            <script type="text/javascript" charset="utf-8" src="phonegap-1.3.0.js"></script>
            <script type="text/javascript">
                
                
                // If you want to prevent dragging, uncomment this section
                /*
                 function preventBehavior(e) 
                 { 
                 e.preventDefault(); 
                 };
                 document.addEventListener("touchmove", preventBehavior, false);
                 */
                
                /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
                 see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
                 for more details -jm */
                /*
                 function handleOpenURL(url)
                 {
                 // TODO: do something with the url passed in.
                 }
                 */
                
                function onBodyLoad() {		
                    document.addEventListener("deviceready", onDeviceReady, false);
                    
                }
                
                /* When this function is called, PhoneGap has been initialized and is ready to roll */
                /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
                 see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
                 for more details -jm */
                function onDeviceReady() {
                    // do your thing!
                    navigator.notification.alert("PhoneGap is working")
                }
                
                </script>
            </head>
    <body>
    </body>
    <script language="javascript">
        $.ajax({ 
               type: "GET", 
               url: "phresco-env-config.xml", 
               dataType: "xml", 
               cache: false, 
               success: function(xml) { 
               $(xml).find("Server").each(function(){ 
                                       
                                      var protocol = $(this).find('protocol').text();
                                      var host = $(this).find('host').text(); 
                                      var port = $(this).find('port').text(); 
                                      var context =$(this).find('context').text(); 
                                      
                                              var url = protocol+'://'+host+':'+port+'/'+context;
                                              document.location.href = url;
                                              if (console && console.log){
                                              console.log( 'Sample of data:', data);
                                              }
                                      }); 
               } 
               }); 
        </script>
    
</html>
